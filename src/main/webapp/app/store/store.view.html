<!DOCTYPE html>
<html ng-app="app.store">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Store</title>
<link rel="shortcut icon" type="image/png" href="./img/3gs_icon.png" />
<!-- MAIN STYLE -->
<link rel="stylesheet" href="./assets/css/main.css" />
<!-- BOOTSTRAP -->
<link rel="stylesheet" href="./assets/css/bootstrap.min.css" />
<!-- FONT AWESOME -->
<link rel="stylesheet" href="./assets/css/font-awesome.min.css" />
<!-- SWEET ALERT -->
<link rel="stylesheet" href="./assets/css/sweetalert.css" />
<!-- ANGULAR RESPONSIVE TABLES -->
<link rel="stylesheet"
	href="./assets/css/angular-responsive-tables.min.css" />
<!-- ANGULAR JS -->
<script src="./assets/js/angular.min.js"></script>
<script type="text/ng-template" id="customTemplate.html">
  <a>
      <img ng-src="{{match.model.prodImg}}" width="32">
      <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>
  </a>
</script>
</head>
<body ng-cloak>
	<div class="container-fluid container-margin"
		ng-controller="StoreCtrl as vm">
		<!--  Declare angular Ctrl as vm   -->

		<!--  Start tabset  -->

		<uib-tabset> <!-- Tab 1   --> <uib-tab
			heading="ทำรายการ Order สินค้า" active="vm.tabs[0].selected"
			select="vm.initPage()">
		<div class="col-md-12">
			<div class="col-md-5">
				<br>
				<h3>ทำรายการ Order สินค้า</h3>

				<!-- Create Order Form  -->

				<form class="form-horizontal form-margin" novalidate
					name="vm.orderForm" ng-submit="vm.saveOrder()">
					<div class="col-md-12">
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">รหัสสินค้า</label>
								<div class="col-md-7">
									<input type="text" ng-model="vm.prodSelected"
										ng-click="vm.findAllProd()" ng-change="vm.showProd = false"
										uib-typeahead="prodList as prodList.prodCode for prodList in vm.prodList| filter:{prodCode:$viewValue} | limitTo:8"
										class="form-control" required
										typeahead-template-url="customTemplate.html"
										typeahead-on-select="vm.selectProd($item)" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">จำนวน</label>
								<div class="col-md-7">
									<input type="number" class="form-control" required
										ng-model="vm.orders.orderQuantity" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">รายละเอียดสั่งซื้อ
									(สี,ลาย ฯลฯ)</label>
								<div class="col-md-7">
									<input type="text" class="form-control" required
										ng-model="vm.orders.orderRemark" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">การจัดส่ง</label>
								<div class="col-md-7">
									<div class="input-group">
										<select ng-model="vm.selectedOrderShipping"
											ng-options="s.type for s in vm.shipping" style="width: 40%"
											class="form-control"></select> <input type="text"
											class="form-control" style="width: 60%"
											placeholder="รหัส Tracking" required
											ng-model="vm.orders.orderTracking" maxlength="15">
									</div>
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">ชื่อลูกค้า</label>
								<div class="col-md-7">
									<input type="text" class="form-control" required
										ng-model="vm.custSelected" ng-change="vm.invalidCust()"
										ng-click="vm.findAllCust()"
										uib-typeahead="cust as cust.cusName for cust in vm.custList| filter:$viewValue | limitTo:8"
										typeahead-on-select="vm.selectCust($item)" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">เบอร์โทร</label>
								<div class="col-md-7">
									<input type="tel" class="form-control" required
										ng-model="vm.customers.cusTel" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<label class="col-md-5 control-label">ที่อยู่</label>
								<div class="col-md-7">
									<input type="text" class="form-control" required
										ng-model="vm.customers.cusAddress" />
								</div>
							</div>
						</div>
						<div class="col-md-12">
							<div class="form-group">
								<div class="col-md-1 col-md-offset-6 text-center">
									<button class="btn btn-default" type="submit"
										ng-disabled="vm.orderForm.$invalid">
										<fa name="floppy-o" size="1" tital="Save"></fa>
										บันทึก
									</button>
								</div>
								<div class="col-md-1 col-md-offset-2 text-center">
									<button class="btn btn-default" type="button"
										ng-click="vm.initPage()" type="button"
										ng-disabled="vm.orderForm.$pristine">
										<fa name="remove" size="1" title="Reset"></fa>
										ยกเลิก
									</button>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
			<div class="col-md-7">
				<!-- Partial product detail -->
				<div flash-message="4000" class="text-center"></div>
				<div ng-hide="vm.showProd"></div>
				<div ng-show="vm.showProd"
					ng-include="'./app/store/partials/prod-info.html'"></div>
			</div>
		</div>
		</uib-tab> <!--  Start tab 2  --> <uib-tab heading="ค้นหาประวัติ Order"
			active="vm.tabs[1].selected" select="vm.initPage()">
		<div flash-message="3500" class="text-center"></div>

		<!-- Order search form -->

		<form class="form-horizontal form-margin" novalidate="novalidate"
			ng-submit="vm.orderSearch()">
			<div class="col-md-12">
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">รหัสสินค้า</label>
						<div class="col-md-8">
							<input type="text" ng-model="vm.orderSearchs.prodCode"
								class="form-control" />
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">รอบ Order</label>
						<div class="col-md-8">
							<input type="text" class="form-control"
								ng-model="vm.orderSearchs.orderLot">
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">ชื่อลูกค้า</label>
						<div class="col-md-8">
							<input type="text" class="form-control"
								ng-model="vm.custSelected" ng-change="vm.invalidCust()"
								ng-click="vm.findAllCust()"
								uib-typeahead="cust as cust.cusName for cust in vm.custList| filter:$viewValue | limitTo:8"
								typeahead-on-select="vm.selectCust($item)" />
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-12">
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">Order date</label>
						<div class="col-md-4">
							<div class="input-group">
								<input type="text" class="form-control" placeholder="Start"
									readonly uib-datepicker-popup="dd-MM-yyyy"
									is-open="vm.startDate.opened" ng-model="vm.seDate.startDate"><span
									class="input-group-btn">
									<button type="button" class="btn btn-default"
										ng-click="vm.start($event)">
										<i class="glyphicon glyphicon-calendar"></i>
									</button>
								</span>
							</div>
						</div>
						<div class="col-md-4">
							<p class="input-group">
								<input type="text" class="form-control"
									uib-datepicker-popup="dd-MM-yyyy" placeholder="End" readonly
									ng-model="vm.seDate.endDate" is-open="vm.endDate.opened"
									min-date="vm.seDate.startDate" close-text="Close" /> <span
									class="input-group-btn">
									<button type="button" class="btn btn-default"
										ng-click="vm.end($event)">
										<i class="glyphicon glyphicon-calendar"></i>
									</button>
								</span>
							</p>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">รูปแบบการจัดส่ง</label>
						<div class="col-md-8">
							<select ng-model="vm.selectedOrderShipping"
								ng-options="s.type for s in vm.shipping" class="form-control"
								style="width: 50%"></select>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">Tracking</label>
						<div class="col-md-8">
							<input type="text" class="form-control"
								ng-model="vm.orderSearchs.orderTracking">
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-12 col-sm-12">
				<div class="form-group">
					<div class="col-md-1 col-md-offset-5 text-center">
						<button class="btn btn-default" type="submit">
							<fa name="search" size="1" title="search"></fa>
							ค้นหา
						</button>
					</div>
					<div class="col-md-1 text-center">
						<button class="btn btn-default" ng-click="vm.initPage()"
							type="button">
							<fa name="remove" size="1" title="Reset" ng-click="vm.initPage()"></fa>
							ยกเลิก
						</button>
					</div>
				</div>
			</div>
		</form>


		<!--  Order Table -->

		<div class="col-md-12">
			<div class="pull-left">
				<button class="btn btn-default" ng-click="vm.exportExel()">Export</button>
				<!-- Export to excel -->
			</div>
			<div class="pull-right">
				<select ng-model="vm.selectedNumPerPage"
					ng-selected="vm.numPerPage = vm.selectedNumPerPage.number"
					ng-options="n.number for n in vm.numPerPages"
					class="input-sm form-control selector-option"></select>
			</div>
		</div>
		<div class="col-md-12">
			<table st-table="displayedOrder" wt-responsive-table
				class="table table-striped table-bordered"
				st-safe-src="vm.orderList">
				<thead>
					<tr>
						<th class="text-center">#</th>
						<th class="text-center">รูปสินค้า</th>
						<th class="text-center">รหัสสินค้า</th>
						<th class="text-center">เพิ่มเติม</th>
						<th class="text-center">จำนวน</th>
						<th class="text-center">รูปแบบการส่ง</th>
						<th class="text-center">หมายเลข Tracking</th>
						<th class="text-center">ชื่อลูกค้า</th>
						<th class="text-center">สั่งเมื่อ</th>
						<th class="text-center">รอบการสั่งที่</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="o in displayedOrder">
						<td class="text-center">{{$index+1}}</td>
						<td><img ng-src="{{o.product.prodImg}}" width="70"
							align="middle" height="70" class="img-responsive"></td>
						<td class="text-center">{{o.product.prodCode}}</td>
						<td class="text-center">{{o.orderRemark}}</td>
						<td class="text-center">{{o.orderQuantity}}</td>
						<td class="text-center">{{o.orderShipping}}</td>
						<td class="text-center">{{o.orderTracking}}</td>
						<td class="text-center">{{o.customer.cusName}}</td>
						<td class="text-center">{{o.orderDate}}</td>
						<td class="text-center">{{o.orderLot}}</td>
						<td class="text-center"><button class="btn btn-danger"
								title="Fail order" ng-click="vm.failOrder(o)">
								<fa name="trash-o"></fa>
							</button></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan="11" class="text-center">
							<div st-pagination="" st-items-by-page="vm.numPerPage"
								st-displayed-pages="displayedPages"
								st-template="app/common/pagination/pagination.tpl.html"></div>
						</td>
					</tr>
				</tfoot>
			</table>
		</div>
		</uib-tab> <!-- Customer Search --> <uib-tab heading="ค้นหาลูกค้า"
			active="vm.tabs[2].selected" select="vm.initPage()">
		<div flash-message="3500" class="text-center"></div>
		<form class="form-horizontal form-margin" novalidate="novalidate"
			ng-submit="vm.custSearch()">
			<div class="col-md-12">
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">ชื่อลูกค้า</label>
						<div class="col-md-8">
							<input type="text" ng-model="vm.customers.cusName"
								class="form-control" />
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="form-group">
						<label class="col-md-4 control-label">เบอร์โทร</label>
						<div class="col-md-8">
							<input type="text" ng-model="vm.customers.cusTel"
								class="form-control" />
						</div>
					</div>
				</div>
			</div>
			<div class="col-md-12 col-sm-12">
				<div class="form-group">
					<div class="col-md-1 col-md-offset-5 text-center">
						<button class="btn btn-default" type="submit">
							<fa name="search" size="1" title="search"></fa>
							ค้นหา
						</button>
					</div>
					<div class="col-md-1 text-center">
						<button class="btn btn-default" ng-click="vm.initPage()"
							type="button">
							<fa name="remove" size="1" title="Reset" ng-click="vm.initPage()"></fa>
							ยกเลิก
						</button>
					</div>
				</div>
			</div>
		</form>
		<!-- Customer Table -->
		<div class="col-md-12">
			<div class="pull-right">
				<select ng-model="vm.selectedNumPerPage"
					ng-selected="vm.numPerPage = vm.selectedNumPerPage.number"
					ng-options="n.number for n in vm.numPerPages"
					class="input-sm form-control selector-option"></select>
			</div>
		</div>
		<div class="col-md-12">
			<table st-table="displayedCust" wt-responsive-table
				class="table table-striped table-bordered" st-safe-src="vm.custList">
				<thead>
					<tr>
						<th class="text-center">#</th>
						<th class="text-center">ชื่อลูกค้า</th>
						<th class="text-center">ที่อยู่</th>
						<th class="text-center">เบอร์โทร</th>
						<th></th>
					</tr>
				</thead>
				<tbody>
					<tr ng-repeat="c in displayedCust">
						<td class="text-center">{{$index+1}}</td>
						<td class="text-center">{{c.cusName}}</td>
						<td class="text-center">{{c.cusAddress}}</td>
						<td class="text-center">{{c.cusTel}}</td>
						<td class="text-center"></td>
					</tr>
				</tbody>
				<tfoot>
					<tr>
						<td colspan="5" class="text-center">
							<div st-pagination="" st-items-by-page="vm.numPerPage"
								st-displayed-pages="displayedPages"
								st-template="app/common/pagination/pagination.tpl.html"></div>
						</td>
					</tr>
				</tfoot>
			</table>
		</div>
		</uib-tab> </uib-tabset>
	</div>
	<!-- APPLICATION -->
	<script src="./app/app.js">
		</script>
	<script src="./app/store/store.ctrl.js"></script>
	<script src="./app/store/store.service.js"></script>
	<!-- BOOTSTRAP -->
	<script src="./assets/js/jquery.min.js"></script>
	<script src="./assets/js/bootstrap.min.js"></script>
	<!-- ANGULAR UI BOOTSTRAP -->
	<script src="./assets/js/ui-bootstrap-tpls.min.js"></script>
	<!-- ANGULAR FONT AWESOME -->
	<script src="./assets/js/angular-fontawesome.min.js"></script>
	<!-- ANGULAR BOOTBOX -->
	<script src="./assets/js/bootbox.js"></script>
	<script src="./assets/js/ngBootbox.min.js"></script>
	<!-- ANGULAR SWEET ALERT -->
	<script src="./assets/js/ngSweetAlert.min.js"></script>
	<script src="./assets/js/sweetalert.min.js"></script>
	<!-- ANGULAR FLASH -->
	<script src="./assets/js/angular-flash.min.js"></script>
	<!-- ANGULAR AUTO VALIDATE -->
	<script src="./assets/js/jcs-auto-validate.min.js"></script>
	<!-- AngularUI Router -->
	<script src="./assets/js/angular-ui-router.min.js"></script>
	<!-- ANGULAR RESPONSIVE TABLES -->
	<script src="./assets/js/angular-responsive-tables.min.js"></script>
	<!-- ANGULAR SMART TABLE -->
	<script src="./assets/js/smart-table.min.js"></script>
</body>
</html>